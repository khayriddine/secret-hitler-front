<div class="flex flex-col items-center cursor-pointer" (click)="onClick()">
  <!-- Player Avatar with State Indicators -->
  <div class="relative">
    <!-- Base Avatar Image -->
    <img
      *ngIf="!roleRevealMode || !visibleRole"
      [src]="'https://i.pravatar.cc/150?img=1'"
      alt="{{ player.name }}"
      [class]="getAvatarClasses()"
    />

    <!-- Role Image (when revealed) -->
    <img
      *ngIf="roleRevealMode && visibleRole"
      [src]="'/images/roles/' + visibleRole + '.jpg'"
      [alt]="visibleRole"
      [class]="getAvatarClasses()"
    />

    <!-- Status Indicators (corner badges) -->
    <div
      *ngIf="player.isAlive"
      class="absolute -top-1 -right-1 flex flex-col space-y-1"
    >
      <!-- Current President -->
      <div
        *ngIf="isCurrentPresident"
        class="w-3 h-3 rounded-full bg-yellow-400 border border-yellow-600 shadow-sm"
      ></div>

      <!-- Current Chancellor -->
      <div
        *ngIf="isCurrentChancellor"
        class="w-3 h-3 rounded-full bg-green-500 border border-green-700 shadow-sm"
      ></div>

      <!-- Previous President -->
      <div
        *ngIf="isPreviousPresident"
        class="w-3 h-3 rounded-full bg-yellow-300 border border-yellow-500 shadow-sm"
      ></div>

      <!-- Previous Chancellor -->
      <div
        *ngIf="isPreviousChancellor"
        class="w-3 h-3 rounded-full bg-green-300 border border-green-500 shadow-sm"
      ></div>
    </div>

    <!-- Dead Player Indicator -->
    <div
      *ngIf="!player.isAlive"
      class="absolute inset-0 flex items-center justify-center"
    >
      <div
        class="absolute w-full h-full bg-black bg-opacity-50 rounded-full"
      ></div>
      <svg
        class="w-8 h-8 text-white opacity-90"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </div>
  </div>

  <!-- Player Name -->
  <div class="text-sm mt-1 text-center select-none">
    {{
      roleRevealMode && visibleRole ? roleToString(player.role) : player.name
    }}
    <span *ngIf="isCurrentUser" class="text-blue-400">(You)</span>
  </div>
</div>
